views:
  - path: default_view
    title: Home
    type: sections
    icon: mdi:home
    max_columns: 3
    sections:
      - type: grid
        cards:
          - type: button
            name: Kitchen & Living Room
            icon: mdi:countertop
            tap_action:
              action: navigate
              navigation_path: /my-dashboard/kitchen-living
            grid_options:
              columns: 4
              rows: 3
          - type: button
            name: Master Suite
            icon: mdi:bed-king
            tap_action:
              action: navigate
              navigation_path: /my-dashboard/master-suite
            grid_options:
              columns: 4
              rows: 3
          - type: button
            name: Dima's Bedroom
            icon: mdi:bed
            tap_action:
              action: navigate
              navigation_path: /my-dashboard/dima-bedroom
            grid_options:
              columns: 4
              rows: 3
          - type: button
            name: Zoe's Bedroom
            icon: mdi:bed
            tap_action:
              action: navigate
              navigation_path: /my-dashboard/zoe-bedroom
            grid_options:
              columns: 4
              rows: 3
          - type: button
            name: Upstairs Bathroom
            icon: mdi:shower
            tap_action:
              action: navigate
              navigation_path: /my-dashboard/upstairs-bathroom
            grid_options:
              columns: 4
              rows: 3
          - type: button
            name: Garage
            icon: mdi:garage
            tap_action:
              action: navigate
              navigation_path: /my-dashboard/garage
            grid_options:
              columns: 4
              rows: 3
          - type: button
            name: Patio & Entrance
            icon: mdi:door-open
            tap_action:
              action: navigate
              navigation_path: /my-dashboard/patio-entrance
            grid_options:
              columns: 4
              rows: 3
          - type: button
            name: Climate Control
            icon: mdi:hvac
            tap_action:
              action: navigate
              navigation_path: /my-dashboard/climate
            grid_options:
              columns: 4
              rows: 3
          - type: button
            name: Appliances
            icon: mdi:washing-machine
            tap_action:
              action: navigate
              navigation_path: /my-dashboard/appliances
            grid_options:
              columns: 4
              rows: 3
          - type: button
            name: Plants
            icon: mdi:flower
            tap_action:
              action: navigate
              navigation_path: /my-dashboard/plants
            grid_options:
              columns: 4
              rows: 3
          - type: button
            name: Water Softener
            icon: mdi:water
            tap_action:
              action: navigate
              navigation_path: /my-dashboard/water-softener
            grid_options:
              columns: 4
              rows: 3
          - type: button
            name: Entry & Security
            icon: mdi:shield-home
            tap_action:
              action: navigate
              navigation_path: /my-dashboard/entry-security
            grid_options:
              columns: 4
              rows: 3
    badges:
      - type: entity
        show_name: true
        show_state: true
        show_icon: true
        entity: weather.forecast_home
        state_content:
          - state
          - temperature
          - humidity
          - uv_index
          - wind_speed
        show_entity_picture: true
      - type: entity
        show_name: true
        show_state: true
        show_icon: true
        entity: sensor.patio_temp_humidity_sensor_temperature
        name: Outside Temperature
      - type: entity
        show_name: true
        show_state: true
        show_icon: true
        entity: sensor.patio_temp_humidity_sensor_humidity
        name: Outside Humidity
  - type: sections
    title: Kitchen & Living Room
    path: kitchen-living
    icon: mdi:countertop
    max_columns: 3
    sections:
      - type: grid
        title: Kitchen
        cards:
          - type: entities
            entities:
              - entity: light.kitchen_main_lights
                name: Main Lights
                secondary_info: last-changed
              - entity: light.kitchen_under_cabinet
                name: Under Cabinet
                secondary_info: last-changed
              - entity: light.kitchen_pantry
                name: Pantry
                secondary_info: last-changed
              - entity: binary_sensor.hue_motion_01_motion
                name: Motion Kitchen Only
                secondary_info: last-changed
              - entity: sensor.hue_motion_01_temperature
                name: Temperature
                secondary_info: last-changed
              - entity: binary_sensor.kitchen_sink_moisture_sensor_water_leak
                name: Sink Moisture
                secondary_info: last-changed
              - entity: binary_sensor.kitchen_dishwasher_moisture_sensor_water_leak
                secondary_info: last-changed
                name: Dishwasher Moisture
              - entity: binary_sensor.kitchen_refrigerator_moisture_sensor_water_leak
                secondary_info: last-changed
                name: Refrigerator Moisture
              - entity: binary_sensor.kitchen_door_contact_sensor_contact
                name: Kitchen Door
                secondary_info: last-changed
            title: Kitchen
            state_color: true
      - type: grid
        title: Living Room
        cards:
          - type: entities
            entities:
              - entity: light.living_room_lamp
                name: Lamp
                secondary_info: last-changed
              - entity: light.living_room_spot_lights
                name: Spot lights
                secondary_info: last-changed
              - entity: light.living_room_presence_rgb_light
                secondary_info: last-changed
                name: Night Light
              - entity: binary_sensor.living_room_presence_sensors
                name: Presence
                secondary_info: last-changed
              - entity: sensor.filtered_living_room_illuminance
                name: Illuminance
                secondary_info: last-changed
              - entity: sensor.living_room_presence_2_dps310_temperature
                secondary_info: last-changed
                name: Temperature
              - entity: sensor.living_room_presence_2_co2
                secondary_info: last-changed
                name: CO2
              - entity: light.living_room_christmas_tree_outlet
                secondary_info: last-changed
                name: Christmas Tree Lights
              - entity: light.front_door_area
                secondary_info: last-changed
              - type: custom:template-entity-row
                icon: mdi:timer
                name: Button Timer Remaining
                state: >-
                  {% set t = (60 - (now().timestamp() -
                  states('input_datetime.livingroom_kitchen_button_pressed_timestamp')
                  | as_timestamp) / 60) | round(0) %} {% if t < 0 %} 0 {% else
                  %} {{ t }} {% endif %} minutes
              - entity: binary_sensor.patio_door_contact_sensor_contact
                name: Patio Sliding Door
                secondary_info: last-changed
            title: Living Room
            state_color: true
          - type: entities
            entities:
              - remote.living_room_tv_2
            title: Living Room TV 2
          - type: media-control
            entity: media_player.living_room_tv_2_4
      - type: grid
        title: Stairs
        cards:
          - type: entities
            entities:
              - entity: light.stairs_spot_lights
                name: Spot Lights
                secondary_info: last-changed
              - entity: light.stairs_led_strip_2
                secondary_info: last-changed
                name: LED Strip
              - entity: binary_sensor.stairs_motion_sensors
                secondary_info: last-changed
                name: Occupancy
            title: Stairs
            state_color: true
    badges:
      - type: entity
        show_name: true
        show_state: true
        show_icon: true
        entity: weather.forecast_home
        state_content:
          - state
          - temperature
          - humidity
          - uv_index
          - wind_speed
        show_entity_picture: true
      - type: entity
        show_name: true
        show_state: true
        show_icon: true
        entity: sensor.patio_temp_humidity_sensor_temperature
        name: Outside Temperature
      - type: entity
        show_name: true
        show_state: true
        show_icon: true
        entity: sensor.patio_temp_humidity_sensor_humidity
        name: Outside Humidity
  - type: sections
    title: Master Suite
    path: master-suite
    icon: mdi:bed-king
    max_columns: 3
    sections:
      - type: grid
        title: Bedroom
        cards:
          - type: entities
            entities:
              - entity: light.master_bedroom_main_lights
                name: Main Lights
                secondary_info: last-changed
                icon: mdi:ceiling-light-multiple
              - entity: light.master_bedroom_bedside_lamps
                secondary_info: last-changed
                name: Bedside Lamps
              - entity: light.master_bedroom_olesia_lamp
                secondary_info: last-changed
                name: Olesia Lamp
              - entity: light.master_bedroom_richard_lamp
                secondary_info: last-changed
                name: Richard Lamp
              - entity: light.master_bedroom_floor_lamp
                name: Floor Lamp
                secondary_info: last-changed
              - entity: light.master_bedroom_under_bed_led_strip
                secondary_info: last-changed
                name: Under Bed Lights
              - entity: light.dlight_01_slider
                secondary_info: last-changed
              - entity: light.master_bedroom_closet_area
                name: Closet Area
                secondary_info: last-changed
              - entity: light.master_bedroom_vanity
                secondary_info: last-changed
                name: Vanity
              - entity: light.master_bedroom_vanity_plus_closet
                secondary_info: last-changed
                name: Vanity + Closet
              - entity: remote.tv
                name: TV
                secondary_info: last-changed
              - entity: sensor.master_bedroom_illuminance_moving_average
                name: Illuminance
                secondary_info: last-changed
              - entity: binary_sensor.master_bedroom_vanity_moisture_sensor_water_leak
                name: Vanity Moisture
                secondary_info: last-changed
              - entity: binary_sensor.everything_presence_lite_5cd9e4_zone_1_occupancy
                secondary_info: last-changed
                name: Chair Occupancy
                icon: mdi:home
              - entity: binary_sensor.master_bedroom_presence_sensors
                secondary_info: last-changed
                name: Presence
                icon: mdi:home
              - entity: sensor.everything_presence_lite_5cd9e4_co2
                secondary_info: last-changed
                name: CO2
              - entity: sensor.master_bedroom_temp_humidity_temperature
                secondary_info: last-changed
                name: Temperature
              - entity: sensor.master_bedroom_temp_humidity_humidity
                secondary_info: last-changed
                name: Humidity
              - entity: binary_sensor.master_bedroom_window_contact_sensor_contact
                name: Window
                secondary_info: last-changed
            title: Master Bedroom
            state_color: true
          - type: media-control
            entity: media_player.tv_2
      - type: grid
        title: Bathroom
        cards:
          - type: entities
            entities:
              - entity: sensor.master_bathroom_temp_humidity_2_temperature
                secondary_info: last-changed
                name: Temperature
              - entity: sensor.master_bathroom_temp_humidity_2_humidity
                name: Humidity
                secondary_info: last-changed
              - entity: sensor.master_bathroom_derivative_humidity
                name: Derivative Humidity
                secondary_info: last-changed
              - entity: binary_sensor.master_bathroom_humidity_target
                secondary_info: last-changed
                name: Humidity Target
              - entity: sensor.master_bathroom_presence_co2
                secondary_info: last-changed
                name: CO2
              - entity: switch.master_bathroom_main_lights
                secondary_info: last-changed
                name: Main Lights
              - entity: light.master_bathroom_presence_rgb_light
                name: Night Light
                secondary_info: last-changed
              - entity: switch.master_bathroom_exhaust_fan
                secondary_info: last-changed
                name: Exhaust Fan
              - entity: timer.master_bathroom_fan_timer
                name: Fan Timer
                secondary_info: last-changed
              - entity: binary_sensor.master_bathroom_moisture_sensor_water_leak
                name: Moisture
                secondary_info: last-changed
              - entity: binary_sensor.master_bathroom_motion_sensors
                name: Presence
                secondary_info: last-changed
                icon: mdi:home
            title: Master Bathroom
            state_color: true
    badges:
      - type: entity
        show_name: true
        show_state: true
        show_icon: true
        entity: weather.forecast_home
        state_content:
          - state
          - temperature
          - humidity
          - uv_index
          - wind_speed
        show_entity_picture: true
      - type: entity
        show_name: true
        show_state: true
        show_icon: true
        entity: sensor.patio_temp_humidity_sensor_temperature
        name: Outside Temperature
      - type: entity
        show_name: true
        show_state: true
        show_icon: true
        entity: sensor.patio_temp_humidity_sensor_humidity
        name: Outside Humidity
  - type: sections
    title: Dima's Bedroom
    path: dima-bedroom
    icon: mdi:bed
    max_columns: 2
    sections:
      - type: grid
        cards:
          - type: entities
            entities:
              - entity: light.dima_bedroom_main_lights
                secondary_info: last-changed
                name: Main Lights
              - entity: binary_sensor.dima_bedroom_presence_radar_target
                name: Presence
                secondary_info: last-changed
                icon: mdi:home
              - entity: sensor.dima_bedroom_presence_co2
                name: CO2
                secondary_info: last-changed
              - entity: sensor.dima_bedroom_presence_ltr390_light
                secondary_info: last-changed
                name: Illuminance
              - entity: sensor.dima_bedroom_presence_dps310_temperature
                name: Temperature
                secondary_info: last-changed
              - entity: timer.dima_bedroom_lights_timer
                name: Lights Timer
                secondary_info: last-changed
            title: Dima's Bedroom
            state_color: true
    badges:
      - type: entity
        show_name: true
        show_state: true
        show_icon: true
        entity: weather.forecast_home
        state_content:
          - state
          - temperature
          - humidity
          - uv_index
          - wind_speed
        show_entity_picture: true
      - type: entity
        show_name: true
        show_state: true
        show_icon: true
        entity: sensor.patio_temp_humidity_sensor_temperature
        name: Outside Temperature
      - type: entity
        show_name: true
        show_state: true
        show_icon: true
        entity: sensor.patio_temp_humidity_sensor_humidity
        name: Outside Humidity
  - type: sections
    cards: []
    title: Entry
    icon: mdi:door
    max_columns: 3
    dense_section_placement: true
    sections:
      - type: grid
        cards:
          - show_state: true
            show_name: true
            camera_view: live
            fit_mode: cover
            type: picture-entity
            entity: cover.group_garage_door_opener_door
            camera_image: camera.garage_camera_hd_stream
            tap_action:
              action: toggle
              confirmation:
                text: Open/close garage door?
            name: Garage Door Status
            grid_options:
              columns: 21
              rows: 6
          - show_state: true
            show_name: true
            camera_view: live
            fit_mode: cover
            type: picture-entity
            entity: lock.front_door_lock
            camera_image: camera.front_full_camera_sub_2
            tap_action:
              action: toggle
              confirmation:
                text: Lock/unlock front door?
            name: Front Door Status
            grid_options:
              columns: 21
              rows: 6
          - show_name: true
            show_icon: true
            type: button
            entity: cover.ratgdov25i_78fbe5_door
            tap_action:
              action: toggle
              confirmation:
                text: Open/close garage door?
            show_state: true
            name: Garage Door
            grid_options:
              rows: 3
              columns: 6
          - show_name: true
            show_icon: true
            type: button
            entity: lock.front_door_lock
            tap_action:
              action: toggle
              confirmation:
                text: Lock/unlock front door?
            show_state: true
            name: Front Door
            grid_options:
              columns: 6
              rows: 3
          - type: entities
            entities:
              - entity: binary_sensor.front_door_group_contact_sensor
                name: 'Front Door '
                secondary_info: last-changed
              - entity: binary_sensor.kitchen_door_group_contact_sensor
                secondary_info: last-changed
                name: 'Kitchen Door '
              - entity: binary_sensor.patio_door_contact_sensor_contact
                secondary_info: last-changed
                name: 'Patio Door '
              - entity: binary_sensor.zoe_bedroom_window_contact_sensor_contact
                secondary_info: last-changed
                name: Zoe Window
                icon: mdi:window-closed
              - entity: binary_sensor.master_bedroom_window_contact_sensor_contact
                secondary_info: last-changed
                name: 'Master Bedroom Window '
                icon: mdi:window-closed
            grid_options:
              columns: 21
              rows: 5
          - type: button
            entity: input_button.garage_confirm_person_present
            name: Confirm Person Present
            icon: mdi:account-check
            show_state: false
            tap_action:
              action: toggle
              confirmation:
                text: Extend garage timeout to 60 minutes?
        column_span: 1
      - type: grid
        cards:
          - type: vertical-stack
            cards:
              - type: markdown
                content: >
                  # ðŸ›¡ï¸ Security System

                  {% if states('input_select.home_security_mode') == 'Home' %}

                  ## ðŸŸ¢ HOME MODE (ACTIVE)

                  _IVS monitoring only - normal daily life_

                  {% elif states('input_select.home_security_mode') == 'Away' %}

                  ## ðŸ”´ AWAY MODE (ACTIVE)

                  _Full lockdown - all sensors monitored_

                  {% else %}

                  **Current Mode:** {{ states('input_select.home_security_mode')
                  }}

                  {% endif %}
              - type: horizontal-stack
                cards:
                  - type: button
                    entity: input_select.home_security_mode
                    name: Set Home Mode
                    icon: mdi:shield-home
                    show_state: false
                    tap_action:
                      action: call-service
                      service: input_select.select_option
                      service_data:
                        entity_id: input_select.home_security_mode
                        option: Home
                  - type: button
                    entity: input_select.home_security_mode
                    name: Arm Away Mode
                    icon: mdi:shield-lock
                    show_state: false
                    tap_action:
                      action: call-service
                      service: input_select.select_option
                      service_data:
                        entity_id: input_select.home_security_mode
                        option: Away
              - type: entities
                title: System Status
                entities:
                  - entity: input_datetime.home_security_last_analysis
                    name: Last Analysis
                  - entity: input_boolean.home_security_audio_alerts
                    name: Audio Alerts
                state_color: true
              - type: entities
                title: Settings
                entities:
                  - entity: input_number.home_security_tts_volume
                    name: Alert Volume
                  - entity: input_number.home_security_confidence_threshold
                    name: Confidence Threshold
                  - entity: input_number.home_security_warning_rate_limit
                    name: Warning Rate Limit
    badges:
      - type: entity
        show_name: true
        show_state: true
        show_icon: true
        entity: weather.forecast_home
        state_content:
          - state
          - temperature
          - humidity
          - uv_index
          - wind_speed
        show_entity_picture: true
      - type: entity
        show_name: true
        show_state: true
        show_icon: true
        state_content: temperature
        show_entity_picture: true
        entity: sensor.patio_temp_humidity_sensor_temperature
        name: Outside Temprature
      - type: entity
        show_name: true
        show_state: true
        show_icon: true
        state_content: temperature
        show_entity_picture: true
        entity: sensor.patio_temp_humidity_sensor_humidity
        name: Outside Humidity
    header:
      layout: center
      badges_position: bottom
      badges_wrap: wrap
  - type: sections
    max_columns: 4
    title: HVAC
    path: hvac
    icon: mdi:hvac
    sections:
      - type: grid
        cards:
          - type: thermostat
            entity: climate.home_downstairs
            features:
              - style: icons
                type: climate-hvac-modes
            grid_options:
              rows: 5
              columns: 16
          - type: thermostat
            entity: climate.home_upstairs
            features:
              - style: icons
                type: climate-hvac-modes
            grid_options:
              rows: 5
              columns: 16
    badges:
      - type: entity
        show_name: true
        show_state: true
        show_icon: true
        entity: weather.forecast_home
        state_content:
          - state
          - temperature
          - humidity
          - uv_index
          - wind_speed
        show_entity_picture: true
      - type: entity
        show_name: true
        show_state: true
        show_icon: true
        state_content: temperature
        show_entity_picture: true
        entity: sensor.patio_temp_humidity_sensor_temperature
        name: Outside Temprature
      - type: entity
        show_name: true
        show_state: true
        show_icon: true
        state_content: temperature
        show_entity_picture: true
        entity: sensor.patio_temp_humidity_sensor_humidity
        name: Outside Humidity
  - type: sections
    max_columns: 4
    title: Washer Dryer
    path: washer-dryer
    icon: mdi:washing-machine
    sections:
      - type: grid
        cards:
          - type: vertical-stack
            cards:
              - type: picture-elements
                elements:
                  - type: image
                    entity: sensor.top_load_washer_run_state
                    image: /local/lg-icons/sensing.png
                    state_image:
                      Detecting: /local/lg-icons/sensing-on.png
                    style:
                      top: 33%
                      left: 33%
                      width: 20%
                      image-rendering: crisp
                  - type: image
                    entity: sensor.top_load_washer_run_state
                    image: /local/lg-icons/wash.png
                    state_image:
                      Washing: /local/lg-icons/wash-on.png
                    style:
                      top: 33%
                      left: 51%
                      width: 20%
                      image-rendering: crisp
                  - type: image
                    entity: sensor.top_load_washer_run_state
                    image: /local/lg-icons/rinse.png
                    state_image:
                      Rinsing: /local/lg-icons/rinse-on.png
                    style:
                      top: 33%
                      left: 69%
                      width: 20%
                      image-rendering: crisp
                  - type: image
                    entity: sensor.top_load_washer_run_state
                    image: /local/lg-icons/spin.png
                    state_image:
                      Spinning: /local/lg-icons/spin-on.png
                    style:
                      top: 33%
                      left: 87%
                      width: 20%
                      image-rendering: crisp
                  - type: image
                    entity: sensor.top_load_washer
                    image: /local/lg-icons/wifi.png
                    state_image:
                      'on': /local/lg-icons/wifi-on.png
                    style:
                      top: 73%
                      left: 32%
                      width: 10%
                      image-rendering: crisp
                  - type: image
                    entity: binary_sensor.top_load_washer_door_lock
                    image: /local/lg-icons/lock.png
                    state_image:
                      'on': /local/lg-icons/lock-on.png
                    style:
                      top: 73%
                      left: 45%
                      width: 10%
                      image-rendering: crisp
                  - type: state-label
                    entity: sensor.top_load_washer_remaining_time
                    style:
                      color: '#8df427'
                      font-family: segment7
                      font-size: 50px
                      left: 95%
                      top: 74%
                      transform: translate(-100%,-50%)
                image: /local/hass-washer-card-bg.png
              - type: conditional
                conditions:
                  - entity: sensor.top_load_washer_run_state
                    state_not: '-'
                card:
                  type: entities
                  entities:
                    - entity: sensor.top_load_washer
                      type: attribute
                      attribute: current_course
                      name: Current Course
                      icon: mdi:tune-vertical-variant
                    - entity: sensor.top_load_washer
                      type: attribute
                      attribute: water_temp
                      name: Water Temperature
                      icon: mdi:coolant-temperature
                    - entity: sensor.top_load_washer
                      type: attribute
                      attribute: spin_speed
                      name: Spin Speed
                      icon: mdi:rotate-right
                  state_color: false
          - type: vertical-stack
            cards:
              - type: picture-elements
                elements:
                  - type: image
                    entity: sensor.dryer_run_state
                    image: /local/lg-icons/dry.png
                    state_image:
                      Drying: /local/lg-icons/dry-on.png
                    style:
                      top: 33%
                      left: 69%
                      width: 20%
                      image-rendering: crisp
                  - type: image
                    entity: sensor.dryer_run_state
                    image: /local/lg-icons/cool.png
                    state_image:
                      Cooling: /local/lg-icons/cool-on.png
                    style:
                      top: 33%
                      left: 87%
                      width: 20%
                      image-rendering: crisp
                  - type: image
                    entity: sensor.dryer
                    image: /local/lg-icons/wifi.png
                    state_image:
                      'on': /local/lg-icons/wifi-on.png
                    style:
                      top: 73%
                      left: 32%
                      width: 10%
                      image-rendering: crisp
                  - type: state-label
                    entity: sensor.dryer_remaining_time
                    style:
                      color: '#8df427'
                      font-family: segment7
                      font-size: 50px
                      left: 95%
                      top: 74%
                      transform: translate(-100%,-50%)
                  - type: image
                    entity: binary_sensor.dryer_child_lock
                    image: /local/lg-icons/lock.png
                    state_image:
                      'on': /local/lg-icons/lock-on.png
                    style:
                      top: 73%
                      left: 45%
                      width: 10%
                      image-rendering: crisp
                image: /local/hass-dryer-card-bg.png
              - type: conditional
                conditions:
                  - entity: sensor.dryer_run_state
                    state_not: '-'
                card:
                  type: entities
                  entities:
                    - entity: sensor.dryer
                      type: attribute
                      attribute: current_course
                      name: Current Course
                      icon: mdi:tune-vertical-variant
                    - entity: sensor.dryer
                      type: attribute
                      attribute: temp_control
                      name: Temperature Control
                      icon: mdi:thermometer
                    - entity: sensor.dryer
                      type: attribute
                      attribute: dry_level
                      name: Dry Level
                      icon: mdi:air-filter
        column_span: 2
  - type: sections
    max_columns: 10
    title: Fridge
    path: fridge
    dense_section_placement: true
    top_margin: false
    sections:
      - type: grid
        columns: 1
        cards:
          - type: horizontal-stack
            cards:
              - type: custom:button-card
                entity: binary_sensor.kitchen_fridge_door_contact_sensor_intrusion
                name: Fridge
                show_state: true
                state_display: |
                  [[[
                    return entity.state === 'on' ? 'Door Open' : 'Door Closed';
                  ]]]
                icon: |
                  [[[
                    return entity.state === 'on' ? 'mdi:fridge-alert' : 'mdi:fridge';
                  ]]]
                styles:
                  card:
                    - height: 150px
                  icon:
                    - width: 80px
                    - color: |
                        [[[
                          const door = states['binary_sensor.kitchen_fridge_door_contact_sensor_intrusion'].state;
                          const temp = parseFloat(states['sensor.kitchen_fridge_temp_humidity_temperature'].state);
                          if (door === 'on') return '#ff0000';
                          if (temp > 45 || temp < 32) return '#ff0000';
                          if (temp > 42 || temp < 35) return '#ffeb3b';
                          return '#4caf50';
                        ]]]
                  name:
                    - font-size: 18px
                    - font-weight: bold
                  state:
                    - font-size: 14px
                tap_action:
                  action: more-info
              - type: custom:button-card
                entity: binary_sensor.kitchen_freezer_door_contact_sensor_intrusion
                name: Freezer
                show_state: true
                state_display: |
                  [[[
                    return entity.state === 'on' ? 'Door Open' : 'Door Closed';
                  ]]]
                icon: |
                  [[[
                    return entity.state === 'on' ? 'mdi:snowflake-alert' : 'mdi:snowflake';
                  ]]]
                styles:
                  card:
                    - height: 150px
                  icon:
                    - width: 80px
                    - color: |
                        [[[
                          const door = states['binary_sensor.kitchen_freezer_door_contact_sensor_intrusion'].state;
                          const temp = parseFloat(states['sensor.kitchen_freezer_temp_humidity_temperature'].state);
                          if (door === 'on') return '#ff0000';
                          if (temp > 18 || temp < 7) return '#ff0000';
                          if (temp > 15 || temp < 10) return '#ffeb3b';
                          return '#4caf50';
                        ]]]
                  name:
                    - font-size: 18px
                    - font-weight: bold
                  state:
                    - font-size: 14px
                tap_action:
                  action: more-info
          - type: markdown
            content: >
              **âš ï¸ Note:** Freezer sensor limited to 5Â°F minimum. Thresholds
              adjusted to 10-15Â°F (sensor reads ~11Â°F when freezer at 0Â°F).
              Alerts detect temperature **rises** from baseline. New OWON
              THS-317-ET sensor ordered (-40Â°F to 200Â°F range).
          - type: horizontal-stack
            cards:
              - type: gauge
                entity: sensor.kitchen_fridge_temp_humidity_temperature
                name: Fridge Temp
                unit: Â°F
                needle: true
                min: 30
                max: 50
                segments:
                  - from: 30
                    color: '#ff0000'
                  - from: 32
                    color: '#ffeb3b'
                  - from: 35
                    color: '#4caf50'
                  - from: 42
                    color: '#ffeb3b'
                  - from: 45
                    color: '#ff0000'
              - type: gauge
                entity: sensor.kitchen_freezer_temp_humidity_temperature
                name: Freezer Temp
                unit: Â°F
                needle: true
                min: 0
                max: 30
                segments:
                  - from: 0
                    color: '#ff0000'
                  - from: 7
                    color: '#ffeb3b'
                  - from: 10
                    color: '#4caf50'
                  - from: 15
                    color: '#ffeb3b'
                  - from: 18
                    color: '#ff0000'
          - type: entities
            title: Current Conditions
            show_header_toggle: false
            entities:
              - entity: sensor.kitchen_fridge_temp_humidity_temperature
                name: Fridge
                secondary_info: none
              - entity: sensor.kitchen_fridge_temp_humidity_humidity
                name: Fridge Humidity
                secondary_info: none
              - type: divider
              - entity: sensor.kitchen_freezer_temp_humidity_temperature
                name: Freezer
                secondary_info: none
              - entity: sensor.kitchen_freezer_temp_humidity_humidity
                name: Freezer Humidity
                secondary_info: none
              - type: divider
              - entity: binary_sensor.kitchen_fridge_door_contact_sensor_intrusion
                name: Fridge Door
                secondary_info: last-changed
              - entity: binary_sensor.kitchen_freezer_door_contact_sensor_intrusion
                name: Freezer Door
                secondary_info: last-changed
          - type: history-graph
            title: Temperature History (24 hours)
            hours_to_show: 24
            entities:
              - entity: sensor.kitchen_fridge_temp_humidity_temperature
                name: Fridge
              - entity: sensor.kitchen_freezer_temp_humidity_temperature
                name: Freezer
          - type: history-graph
            title: Humidity History (24 hours)
            hours_to_show: 24
            entities:
              - entity: sensor.kitchen_fridge_temp_humidity_humidity
                name: Fridge
              - entity: sensor.kitchen_freezer_temp_humidity_humidity
                name: Freezer
          - type: conditional
            conditions:
              - condition: or
                conditions:
                  - condition: numeric_state
                    entity: sensor.kitchen_fridge_temp_humidity_temperature
                    above: 42
                  - condition: numeric_state
                    entity: sensor.kitchen_fridge_temp_humidity_temperature
                    below: 35
            card:
              type: custom:mushroom-template-card
              primary: >
                {% set temp =
                states('sensor.kitchen_fridge_temp_humidity_temperature') |
                float(0) %} {% if temp > 45 or temp < 32 %}
                  ðŸ”´ CRITICAL: Fridge Temperature
                {% else %}
                  Fridge Temperature Warning
                {% endif %}
              secondary: >
                Current: {{
                states('sensor.kitchen_fridge_temp_humidity_temperature') }}Â°F
                (Normal: 35-42Â°F)
              icon: mdi:thermometer-alert
              icon_color: >
                {% set temp =
                states('sensor.kitchen_fridge_temp_humidity_temperature') |
                float(0) %} {% if temp > 45 or temp < 32 %}
                  #ff0000
                {% else %}
                  #ffeb3b
                {% endif %}
              fill_container: true
              layout: horizontal
          - type: conditional
            conditions:
              - condition: or
                conditions:
                  - condition: numeric_state
                    entity: sensor.kitchen_freezer_temp_humidity_temperature
                    above: 15
                  - condition: numeric_state
                    entity: sensor.kitchen_freezer_temp_humidity_temperature
                    below: 10
            card:
              type: custom:mushroom-template-card
              primary: >
                {% set temp =
                states('sensor.kitchen_freezer_temp_humidity_temperature') |
                float(0) %} {% if temp > 18 or temp < 7 %}
                  ðŸ”´ CRITICAL: Freezer Temperature
                {% else %}
                  Freezer Temperature Warning
                {% endif %}
              secondary: >
                Current: {{
                states('sensor.kitchen_freezer_temp_humidity_temperature') }}Â°F
                (Normal: 10-15Â°F, sensor limited to 5Â°F min)
              icon: mdi:thermometer-alert
              icon_color: >
                {% set temp =
                states('sensor.kitchen_freezer_temp_humidity_temperature') |
                float(0) %} {% if temp > 18 or temp < 7 %}
                  #ff0000
                {% else %}
                  #ffeb3b
                {% endif %}
              fill_container: true
              layout: horizontal
          - type: custom:mushroom-entity-card
            entity: sensor.kitchen_fridge_door_contact_sensor_battery_level
            name: Fridge Door Sensor
            secondary_info: last-changed
            primary_info: name
            icon: mdi:battery
            layout: horizontal
          - type: custom:mushroom-entity-card
            entity: sensor.kitchen_freezer_door_contact_sensor_battery_level
            name: Freezer Door Sensor
            secondary_info: last-changed
            primary_info: name
            icon: mdi:battery
            layout: horizontal
          - type: custom:mushroom-entity-card
            entity: sensor.kitchen_fridge_temp_humidity_battery
            name: Fridge Temp Sensor
            secondary_info: last-changed
            primary_info: name
            icon: mdi:battery
            layout: horizontal
          - type: custom:mushroom-entity-card
            entity: sensor.kitchen_freezer_temp_humidity_battery
            name: Freezer Temp Sensor
            secondary_info: last-changed
            primary_info: name
            icon: mdi:battery
            layout: horizontal
          - type: entities
            title: Automations
            show_header_toggle: false
            entities:
              - entity: automation.fridge_door_monitor
                name: Door Monitor
                secondary_info: last-triggered
              - entity: automation.fridge_temperature_monitor
                name: Temperature Monitor
                secondary_info: last-triggered
    icon: mdi:fridge
    cards: []
  - type: sections
    max_columns: 4
    title: Water Softener
    path: water-softener
    icon: mdi:water
    sections:
      - type: grid
        cards:
          - type: entities
            title: Water Softener Status
            show_header_toggle: false
            card_mod:
              style: |
                ha-card {
                  font-size: 150%;
                }
            entities:
              - entity: sensor.water_softener_salt_status
                name: Status
                icon: mdi:water-opacity
              - entity: sensor.water_softener_salt_level
                name: Salt Level
                icon: mdi:percent
          - type: gauge
            entity: sensor.water_softener_salt_level
            name: Salt Level
            unit: '%'
            needle: true
            severity:
              green: 60
              yellow: 40
              red: 0
            segments:
              - from: 0
                color: '#ff0000'
              - from: 20
                color: '#ff6600'
              - from: 40
                color: '#ffd700'
              - from: 60
                color: '#00c853'
          - type: markdown
            content: >
              ðŸ”´ <20% Critical | ðŸŸ  20-40% Low | ðŸŸ¡ 40-60% Moderate | ðŸŸ¢ 60%+
              Good
          - type: conditional
            conditions:
              - entity: binary_sensor.water_softener_sensor_out_of_range
                state: 'on'
            card:
              type: custom:mushroom-template-card
              primary: Sensor Error!
              secondary: TOF sensor out of range - check for obstructions
              icon: mdi:alert-circle
              icon_color: red
              fill_container: true
              layout: horizontal
          - type: custom:apexcharts-card
            header:
              show: true
              title: Salt Level History (7 Days)
              show_states: true
              colorize_states: true
            graph_span: 10d
            yaxis:
              - min: 0
                max: 100
                apex_config:
                  tickAmount: 5
                  labels:
                    formatter: |
                      EVAL:function(value) {
                        return value.toFixed(0) + '%';
                      }
            apex_config:
              chart:
                height: 280px
                zoom:
                  enabled: true
                  type: x
                  autoScaleYaxis: true
                toolbar:
                  show: true
                  tools:
                    zoom: true
                    zoomin: true
                    zoomout: true
                    pan: true
                    reset: true
              xaxis:
                labels:
                  datetimeUTC: false
                  datetimeFormatter:
                    year: yyyy
                    month: MMM yyyy
                    day: MMM dd
                    hour: HH:mm
                    minute: HH:mm
                tickPlacement: 'on'
              tooltip:
                x:
                  format: MMM dd HH:mm
            series:
              - entity: sensor.water_softener_salt_level
                name: Salt Level
                stroke_width: 1
                type: line
                float_precision: 0
                color_threshold:
                  - value: 0
                    color: '#ff0000'
                  - value: 20
                    color: '#ff6600'
                  - value: 40
                    color: '#ffd700'
                  - value: 60
                    color: '#00c853'
          - type: entities
            title: System Info
            show_header_toggle: false
            entities:
              - entity: sensor.water_softener_firmware_version
                name: Firmware Version
                icon: mdi:chip
              - entity: input_datetime.water_softener_last_refill
                name: Last Refill
                icon: mdi:calendar-check
              - entity: input_datetime.water_softener_last_notification
                name: Last Alert
                icon: mdi:bell-alert
      - type: grid
        cards:
          - type: heading
            heading: New section
          - type: grid
            cards:
              - show_name: true
                show_icon: true
                type: button
                entity: input_boolean.disable_leak_alerts
              - type: heading
                heading: New section
  - type: sections
    max_columns: 4
    title: Plants
    path: plants
    sections:
      - type: grid
        cards:
          - type: custom:flower-card
            entity: plant.satsuma_mandarin_2
            battery_sensor: sensor.satsuma_mandarin_battery
            show_bars:
              - moisture
              - temperature
              - humidity
              - dli
              - conductivity
              - illuminance
            display_type: full
          - type: custom:flower-card
            entity: plant.dracaena_fragrans_massangeana
            battery_sensor: sensor.dracaena_fragrans_battery
            show_bars:
              - moisture
              - temperature
              - humidity
              - dli
              - conductivity
              - illuminance
            display_type: full
          - type: custom:flower-card
            entity: plant.aspidistra_elatior
            battery_sensor: sensor.dracaena_fragrans_battery
            show_bars:
              - moisture
              - temperature
              - humidity
              - dli
              - conductivity
              - illuminance
            display_type: full
          - type: custom:flower-card
            entity: plant.dracaena_fragrans
            battery_sensor: sensor.dracaena_fragrans_battery
            show_bars:
              - moisture
              - temperature
              - humidity
              - dli
              - conductivity
              - illuminance
            display_type: full
          - type: custom:flower-card
            entity: plant.schefflera_arboricola
            battery_sensor: sensor.dracaena_fragrans_battery
            show_bars:
              - moisture
              - temperature
              - humidity
              - dli
              - conductivity
              - illuminance
            display_type: full
        column_span: 3
    icon: mdi:flower
    cards: []
    header:
      layout: responsive
      badges_position: top
      badges_wrap: scroll
    badges:
      - type: entity
        show_name: true
        show_state: true
        show_icon: true
        entity: weather.forecast_home
        state_content:
          - state
          - temperature
          - humidity
          - uv_index
          - wind_speed
        show_entity_picture: true
      - type: entity
        show_name: true
        show_state: true
        show_icon: true
        state_content: temperature
        show_entity_picture: true
        entity: sensor.patio_temp_humidity_sensor_temperature
        name: Outside Temprature
      - type: entity
        show_name: true
        show_state: true
        show_icon: true
        state_content: temperature
        show_entity_picture: true
        entity: sensor.patio_temp_humidity_sensor_humidity
        name: Outside Humidity
  - type: sections
    title: Cameras Native
    icon: mdi:webcam
    cards: []
    sections:
      - type: grid
        cards:
          - square: false
            type: grid
            cards:
              - show_state: true
                show_name: true
                camera_view: live
                fit_mode: cover
                type: picture-entity
                entity: camera.sidewalk_street_camera_main
              - show_state: true
                show_name: true
                camera_view: live
                fit_mode: cover
                type: picture-entity
                entity: camera.front_full_camera_main
              - show_state: true
                show_name: true
                camera_view: live
                type: picture-entity
                entity: camera.front_side_camera_hd_stream
              - show_state: true
                show_name: true
                camera_view: live
                type: picture-entity
                entity: camera.patio_camera_hd_stream
              - show_state: true
                show_name: true
                camera_view: live
                type: picture-entity
                entity: camera.doorbell_fluent
              - show_state: true
                show_name: true
                camera_view: live
                type: picture-entity
                entity: camera.entrance_camera_clear
              - show_state: true
                show_name: true
                camera_view: live
                type: picture-entity
                entity: camera.garage_camera_hd_stream
              - show_state: true
                show_name: true
                camera_view: live
                type: picture-entity
                entity: camera.kitchen_camera_2_clear
              - show_state: true
                show_name: true
                camera_view: live
                type: picture-entity
                entity: camera.kitchen_camera
              - show_state: true
                show_name: true
                camera_view: live
                type: picture-entity
                entity: camera.living_room_camera_1_clear
              - show_state: true
                show_name: true
                camera_view: live
                type: picture-entity
                entity: camera.living_room_camera_2_clear
            title: Native
            columns: 1
            grid_options:
              columns: 30
              rows: 5
        column_span: 4
    max_columns: 4
  - type: sections
    max_columns: 4
    title: z2m
    path: z2m
    sections:
      - type: grid
        cards:
          - type: heading
            heading: New section
          - type: vertical-stack
            cards:
              - type: entities
                title: Zigbee Network (Last Hour)
                entities:
                  - entity: sensor.zigbee_total_events_1h
                    name: Total Events
                  - entity: sensor.zigbee_total_errors_1h
                    name: Total Errors
                  - entity: sensor.zigbee_error_rate_1h
                    name: Error Rate
              - type: markdown
                content: |
                  ## Device Errors (Last Hour)
                  {% set devices = states('sensor.zigbee_device_errors_1h') %}
                  {% if devices %}
                    {% for item in devices.split() %}
                      {% if ':' in item %}
                  - `{{ item.split(':')[0] }}`: {{ item.split(':')[1] }} errors
                      {% endif %}
                    {% endfor %}
                  {% else %}
                  âœ… No device errors
                  {% endif %}
      - type: grid
        cards:
          - type: heading
            heading: New section
          - type: custom:scrypted-nvr-camera
            id: 70
            live: true
        column_span: 2
  - type: sections
    max_columns: 4
    title: Scrypted
    path: scrypted
    icon: mdi:webcam
    sections:
      - type: grid
        cards:
          - type: heading
            heading: New section
          - type: grid
            cards:
              - type: heading
                heading: New section
              - type: custom:scrypted-nvr-camera
                id: 70
                live: true
